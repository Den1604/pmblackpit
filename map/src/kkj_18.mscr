% Script File: kkj_18.mscr
% Decoded from: 0 to 4CB0 (kkj_18)

#new:Function $Function_80240000
{
	ADDIU     SP, SP, FFE8
	SW        S0, 10 (SP)
	COPY      S0, A0
	SW        RA, 14 (SP)
	LW        V1, A8 (S0)
	LW        V0, 88 (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .o30
	SW        V1, A8 (S0)
	LUI       V0, 2
	BEQ       R0, R0, .o40
	ADDU      V0, V1, V0
	.o30
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .o44
	SUBU      V0, V1, A0
	.o40
	SW        V0, A8 (S0)
	.o44
	LW        V1, AC (S0)
	LW        V0, 8C (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .o64
	SW        V1, AC (S0)
	LUI       V0, 2
	BEQ       R0, R0, .o74
	ADDU      V0, V1, V0
	.o64
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .o78
	SUBU      V0, V1, A0
	.o74
	SW        V0, AC (S0)
	.o78
	LW        V1, B0 (S0)
	LW        V0, 90 (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .o98
	SW        V1, B0 (S0)
	LUI       V0, 2
	BEQ       R0, R0, .oA8
	ADDU      V0, V1, V0
	.o98
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .oAC
	SUBU      V0, V1, A0
	.oA8
	SW        V0, B0 (S0)
	.oAC
	LW        V1, B4 (S0)
	LW        V0, 94 (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .oCC
	SW        V1, B4 (S0)
	LUI       V0, 2
	BEQ       R0, R0, .oDC
	ADDU      V0, V1, V0
	.oCC
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .oE0
	SUBU      V0, V1, A0
	.oDC
	SW        V0, B4 (S0)
	.oE0
	LW        A0, 84 (S0)
	JAL       ~Func:set_main_pan_u
	LW        A1, A8 (S0)
	LW        A0, 84 (S0)
	JAL       ~Func:set_main_pan_v
	LW        A1, AC (S0)
	LW        A0, 84 (S0)
	JAL       ~Func:set_aux_pan_u
	LW        A1, B0 (S0)
	LW        A0, 84 (S0)
	JAL       ~Func:set_aux_pan_v
	LW        A1, B4 (S0)
	LW        RA, 14 (SP)
	LW        S0, 10 (SP)
	CLEAR     V0
	JR        RA
	ADDIU     SP, SP, 18
}

#new:Function $Function_80240124
{
	ADDIU     SP, SP, FFE8
	SW        S0, 10 (SP)
	COPY      S0, A0
	BEQ       A1, R0, .o24
	SW        RA, 14 (SP)
	SW        R0, 70 (S0)
	SW        R0, 74 (S0)
	SW        R0, 78 (S0)
	SW        R0, 7C (S0)
	.o24
	LW        V0, 70 (S0)
	BNE       V0, R0, .o64
	NOP
	LW        V1, A8 (S0)
	LW        V0, 88 (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .o50
	SW        V1, A8 (S0)
	LUI       V0, 2
	BEQ       R0, R0, .o60
	ADDU      V0, V1, V0
	.o50
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .o64
	SUBU      V0, V1, A0
	.o60
	SW        V0, A8 (S0)
	.o64
	LW        V0, 74 (S0)
	BNE       V0, R0, .oA4
	NOP
	LW        V1, AC (S0)
	LW        V0, 8C (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .o90
	SW        V1, AC (S0)
	LUI       V0, 2
	BEQ       R0, R0, .oA0
	ADDU      V0, V1, V0
	.o90
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .oA4
	SUBU      V0, V1, A0
	.oA0
	SW        V0, AC (S0)
	.oA4
	LW        V0, 78 (S0)
	BNE       V0, R0, .oE4
	NOP
	LW        V1, B0 (S0)
	LW        V0, 90 (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .oD0
	SW        V1, B0 (S0)
	LUI       V0, 2
	BEQ       R0, R0, .oE0
	ADDU      V0, V1, V0
	.oD0
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .oE4
	SUBU      V0, V1, A0
	.oE0
	SW        V0, B0 (S0)
	.oE4
	LW        V0, 7C (S0)
	BNE       V0, R0, .o124
	NOP
	LW        V1, B4 (S0)
	LW        V0, 94 (S0)
	ADDU      V1, V1, V0
	BGEZ      V1, .o110
	SW        V1, B4 (S0)
	LUI       V0, 2
	BEQ       R0, R0, .o120
	ADDU      V0, V1, V0
	.o110
	LUI       A0, 2
	SLT       V0, A0, V1
	BEQ       V0, R0, .o124
	SUBU      V0, V1, A0
	.o120
	SW        V0, B4 (S0)
	.o124
	LW        A0, 84 (S0)
	JAL       ~Func:set_main_pan_u
	LW        A1, A8 (S0)
	LW        A0, 84 (S0)
	JAL       ~Func:set_main_pan_v
	LW        A1, AC (S0)
	LW        A0, 84 (S0)
	JAL       ~Func:set_aux_pan_u
	LW        A1, B0 (S0)
	LW        A0, 84 (S0)
	JAL       ~Func:set_aux_pan_v
	LW        A1, B4 (S0)
	LW        V0, 70 (S0)
	LW        V1, 78 (S0)
	LW        A0, 98 (S0)
	ADDIU     V0, V0, 1
	SW        V0, 70 (S0)
	LW        V0, 74 (S0)
	ADDIU     V1, V1, 1
	SW        V1, 78 (S0)
	LW        V1, 70 (S0)
	ADDIU     V0, V0, 1
	SW        V0, 74 (S0)
	LW        V0, 7C (S0)
	SLT       V1, V1, A0
	ADDIU     V0, V0, 1
	BNE       V1, R0, .o198
	SW        V0, 7C (S0)
	SW        R0, 70 (S0)
	.o198
	LW        V0, 74 (S0)
	LW        V1, 9C (S0)
	SLT       V0, V0, V1
	BEQL      V0, R0, .o1AC
	SW        R0, 74 (S0)
	.o1AC
	LW        V0, 78 (S0)
	LW        V1, A0 (S0)
	SLT       V0, V0, V1
	BEQL      V0, R0, .o1C0
	SW        R0, 78 (S0)
	.o1C0
	LW        V0, 7C (S0)
	LW        V1, A4 (S0)
	SLT       V0, V0, V1
	BEQL      V0, R0, .o1D4
	SW        R0, 7C (S0)
	.o1D4
	LW        RA, 14 (SP)
	LW        S0, 10 (SP)
	CLEAR     V0
	JR        RA
	ADDIU     SP, SP, 18
}

#new:Function $Function_8024030C
{
	LAW       V0, 8007419C
	LBU       V1, 7E (V0)
	ANDI      V1, V1, FE
	SB        V1, 7E (V0)
	LBU       V0, 87 (A0)
	SAB       V0, 8010F2A2
	JR        RA
	ADDIU     V0, R0, 2
}

PADDING: 80240334 to 80240340 (00000334 to 00000340)
00000000 00000000 00000000

% Origin: HEURISTIC
#new:Function $Function_80240340
{
	ADDIU     SP, SP, FFE0
	SW        S1, 14 (SP)
	COPY      S1, A0
	SW        RA, 18 (SP)
	SW        S0, 10 (SP)
	LW        S0, C (S1)
	LW        A1, 0 (S0)
	JAL       ~Func:get_variable
	ADDIU     S0, S0, 4
	JAL       ~Func:get_npc_safe
	COPY      A0, V0
	BEQ       V0, R0, .o44
	NOP
	LW        A1, 0 (S0)
	LH        A2, A8 (V0)
	JAL       ~Func:set_variable
	COPY      A0, S1
	.o44
	LW        RA, 18 (SP)
	LW        S1, 14 (SP)
	LW        S0, 10 (SP)
	ADDIU     V0, R0, 2
	JR        RA
	ADDIU     SP, SP, 20
}

% Origin: HEURISTIC
#new:Function $Function_8024039C
{
	ADDIU     SP, SP, FFB0
	SW        S1, 14 (SP)
	COPY      S1, A0
	SW        RA, 24 (SP)
	SW        S4, 20 (SP)
	SW        S3, 1C (SP)
	SW        S2, 18 (SP)
	SW        S0, 10 (SP)
	SDC1      F28, 48 (SP)
	SDC1      F26, 40 (SP)
	SDC1      F24, 38 (SP)
	SDC1      F22, 30 (SP)
	SDC1      F20, 28 (SP)
	LW        S0, C (S1)
	LW        S3, 0 (S0)
	ADDIU     S0, S0, 4
	JAL       ~Func:get_variable
	COPY      A1, S3
	MTC1      V0, F28
	NOP
	CVT.S.W   F28, F28
	LW        S4, 0 (S0)
	ADDIU     S0, S0, 4
	COPY      A0, S1
	JAL       ~Func:get_variable
	COPY      A1, S4
	MTC1      V0, F26
	NOP
	CVT.S.W   F26, F26
	LW        S0, 0 (S0)
	COPY      A0, S1
	JAL       ~Func:get_variable
	COPY      A1, S0
	MTC1      V0, F24
	NOP
	CVT.S.W   F24, F24
	LIA       S2, 8010EFC8
	LAW       V1, 80077410
	LWC1      F2, A8 (S2)
	MTC1      R0, F0
	SLL       V0, V1, 2
	ADDU      V0, V0, V1
	SLL       V0, V0, 2
	SUBU      V0, V0, V1
	SLL       V1, V0, 3
	ADDU      V0, V0, V1
	SLL       V0, V0, 3
	C.EQ.S    F2, F0
	LTF       F22, V0 (800B1DEC)
	BC1F      .oEC
	NOP
	LIF       F0, 100.0
	BEQ       R0, R0, .oFC
	SUB.S     F22, F22, F0
	.oEC
	LIF       F0, 100.0
	NOP
	ADD.S     F22, F22, F0
	.oFC
	JAL       ~Func:clamp_angle
	MOV.S     F12, F22
	MOV.S     F22, F0
	LIF       F20, 15.0
	JAL       ~Func:sin_deg
	MOV.S     F12, F22
	MUL.S     F0, F0, F20
	NOP
	LH        V0, B0 (S2)
	LIF       F4, 0.5
	MTC1      V0, F2
	NOP
	CVT.S.W   F2, F2
	MUL.S     F2, F2, F4
	NOP
	ADD.S     F28, F28, F0
	ADD.S     F26, F26, F2
	JAL       ~Func:cos_deg
	MOV.S     F12, F22
	MUL.S     F0, F0, F20
	NOP
	COPY      A0, S1
	COPY      A1, S3
	TRUNC.W.S F6, F28
	MFC1      A2, F6
	JAL       ~Func:set_variable
	SUB.S     F24, F24, F0
	COPY      A0, S1
	TRUNC.W.S F6, F26
	MFC1      A2, F6
	JAL       ~Func:set_variable
	COPY      A1, S4
	COPY      A0, S1
	TRUNC.W.S F6, F24
	MFC1      A2, F6
	JAL       ~Func:set_variable
	COPY      A1, S0
	LW        RA, 24 (SP)
	LW        S4, 20 (SP)
	LW        S3, 1C (SP)
	LW        S2, 18 (SP)
	LW        S1, 14 (SP)
	LW        S0, 10 (SP)
	LDC1      F28, 48 (SP)
	LDC1      F26, 40 (SP)
	LDC1      F24, 38 (SP)
	LDC1      F22, 30 (SP)
	LDC1      F20, 28 (SP)
	ADDIU     V0, R0, 2
	JR        RA
	ADDIU     SP, SP, 50
}

% Origin: HEURISTIC
#new:Function $Function_8024056C
{
	ADDIU     SP, SP, FFE8
	SW        RA, 10 (SP)
	BEQ       A1, R0, .o18
	LW        A2, C (A0)
	SAW       R0, $???_80241F10
	.o18
	LIA       V1, $???_80241F10
	LW        V0, 0 (V1)
	BNEL      V0, R0, .o34
	SW        R0, 0 (V1)
	BEQ       R0, R0, .o48
	CLEAR     V0
	.o34
	LW        A1, 0 (A2)
	LAW       A2, $???_80241F14
	JAL       ~Func:set_variable
	RESERVED
	ADDIU     V0, R0, 2
	.o48
	LW        RA, 10 (SP)
	JR        RA
	ADDIU     SP, SP, 18
}

% Origin: HEURISTIC
#new:Function $Function_802405C0
{
	ADDIU     SP, SP, FFE8
	SW        RA, 10 (SP)
	LW        V0, C (A0)
	JAL       ~Func:get_variable
	LW        A1, 0 (V0)
	SAW       V0, $???_80241F14
	ADDIU     V0, R0, 2
	LW        RA, 10 (SP)
	ADDIU     V1, R0, 1
	SAW       V1, $???_80241F10
	JR        RA
	ADDIU     SP, SP, 18
}

% Origin: HEURISTIC
#new:Function $Function_802405F8
{
	ADDIU     SP, SP, FFE8
	SW        RA, 10 (SP)
	LW        V0, C (A0)
	JAL       ~Func:get_variable
	LW        A1, 0 (V0)
	COPY      V1, V0
	BEQ       V1, R0, .o64
	CLEAR     A0
	LW        V0, 0 (V1)
	BEQL      V0, R0, .o50
	SLL       V0, A0, 2
	LIA       A1, $End[0]
	.o34
	ADDIU     V1, V1, 4
	ADDIU     A0, A0, 1
	SW        V0, 0 (A1)
	LW        V0, 0 (V1)
	BNE       V0, R0, .o34
	ADDIU     A1, A1, 4
	SLL       V0, A0, 2
	.o50
	STW       R0, V0 ($End[0])
	BEQ       R0, R0, .o8C
	NOP
	.o64
	LIA       V1, $End[0]
	COPY      A1, V1
	.o70
	ADDIU     V0, A0, 10
	SW        V0, 0 (V1)
	ADDIU     V1, V1, 4
	ADDIU     A0, A0, 1
	SLTI      V0, A0, 70
	BNE       V0, R0, .o70
	SW        R0, 1C0 (A1)
	.o8C
	LW        RA, 10 (SP)
	ADDIU     V0, R0, 2
	JR        RA
	ADDIU     SP, SP, 18
}

% Origin: HEURISTIC
#new:Function $Function_80240694
{
	ADDIU     SP, SP, FFE8
	SW        RA, 10 (SP)
	LW        V0, C (A0)
	JAL       ~Func:get_variable
	LW        A1, 0 (V0)
	COPY      V1, V0
	BEQ       V1, R0, .o64
	CLEAR     A0
	LW        V0, 0 (V1)
	BEQL      V0, R0, .o50
	SLL       V0, A0, 2
	LIA       A1, $End[1C8]
	.o34
	ADDIU     V1, V1, 4
	ADDIU     A0, A0, 1
	SW        V0, 0 (A1)
	LW        V0, 0 (V1)
	BNE       V0, R0, .o34
	ADDIU     A1, A1, 4
	SLL       V0, A0, 2
	.o50
	STW       R0, V0 ($End[1C8])
	BEQ       R0, R0, .o8C
	NOP
	.o64
	LIA       V1, $End[1C8]
	COPY      A1, V1
	.o70
	ADDIU     V0, A0, 80
	SW        V0, 0 (V1)
	ADDIU     V1, V1, 4
	ADDIU     A0, A0, 1
	SLTI      V0, A0, 5B
	BNE       V0, R0, .o70
	SW        R0, 16C (A1)
	.o8C
	LW        RA, 10 (SP)
	ADDIU     V0, R0, 2
	JR        RA
	ADDIU     SP, SP, 18
}

#new:Function $Function_80240730
{
	ADDIU     SP, SP, FFE8
	SW        RA, 10 (SP)
	LW        V0, C (A0)
	JAL       ~Func:get_float_variable
	LW        A1, 0 (V0)
	LAW       V1, 8007419C
	TRUNC.W.S F2, F0
	MFC1      V0, F2
	NOP
	SAB       V0, 8010F08C
	SB        V0, 80 (V1)
	LW        RA, 10 (SP)
	ADDIU     V0, R0, 2
	JR        RA
	ADDIU     SP, SP, 18
}

#new:Function $Function_80240774
{
	ADDIU     SP, SP, FFE0
	SW        S0, 18 (SP)
	COPY      S0, A0
	LIA       V1, 800B1D80
	COPY      A0, V1
	BEQ       A1, R0, .o30
	SW        RA, 1C (SP)
	LHU       V0, 0 (V1)
	ORI       V0, V0, 8
	SH        V0, 0 (V1)
	SW        R0, 70 (S0)
	.o30
	LWC1      F0, 70 (S0)
	LIF       F2, 10.0
	NOP
	ADD.S     F0, F0, F2
	LIF       F2, -1.0
	SWC1      F0, 70 (S0)
	MTC1      R0, F0
	ADDIU     A0, A0, 194
	SWC1      F2, 10 (SP)
	MFC1      A2, F0
	LW        A1, 70 (S0)
	JAL       ~Func:guRotateF
	COPY      A3, A2
	LWC1      F0, 70 (S0)
	LAD       F2, $ConstDouble_80244CA0
	CVT.D.S   F0, F0
	C.LE.D    F2, F0
	NOP
	BC1T      .o90
	ADDIU     V0, R0, 2
	CLEAR     V0
	.o90
	LW        RA, 1C (SP)
	LW        S0, 18 (SP)
	JR        RA
	ADDIU     SP, SP, 20
}

PADDING: 80240814 to 80240820 (00000814 to 00000820)
00000000 00000000 00000000

#new:EntryList $EntryList
{
    ~Vec4f:Entry0 % -187.0    0.0  -35.0   90.0
}

#new:Header $Header
{
    [MainScript]  $Script_Main
    [EntryList]   $EntryList
    [EntryCount]  00000001
    [Background]  80200000
    [MapTattle]   00190013
}

#new:Script $Script_80240870
{
    If  *StoryProgress  ==  00000006
        Call  SetMusicTrack ( 00000000 .Song:PeachMission 00000000 00000008 )
    EndIf
    Return
    End
}

PADDING: 802408B4 to 802408C0 (000008B4 to 000008C0)
00000000 00000000 00000000

#new:Script $Script_UpdateTexturePan_802408C0
{
    SetGroup  00000000
    If  *Var[5]  ==  00000001
        If  *Var[6]  ==  00000001
            If  *Var[7]  ==  00000001
                If  *Var[8]  ==  00000001
                    Call  $Function_80240000 ( )
                    Return
                EndIf
            EndIf
        EndIf
    EndIf
    Call  $Function_80240124 ( )
    Return
    End
}

PADDING: 8024095C to 80240960 (0000095C to 00000960)
00000000

#new:DisplayList $DisplayList_80240960
{
    G_RDPPIPESYNC
    G_TEXTURE        (G_TX_RENDERTILE, 0.999985, 0.999985, 0, true)
    G_SetOtherMode_H (G_MDSFT_CYCLETYPE, G_CYC_2CYCLE)
    G_SetOtherMode_H (G_MDSFT_TEXTPERSP, 1)
    G_SetOtherMode_H (G_MDSFT_TEXTDETAIL, G_TD_CLAMP)
    G_SetOtherMode_H (G_MDSFT_TEXTLOD, G_TL_TILE)
    G_SetOtherMode_H (G_MDSFT_TEXTLUT, G_TT_NONE)
    G_SetOtherMode_H (G_MDSFT_TEXTFILT, G_TF_BILERP)
    G_SetOtherMode_H (G_MDSFT_TEXTCONV, G_TC_FILT)
    G_SETPRIMCOLOR   (0.000000, 0.000000, 75`, 31`, 19`, 255`)
    G_SETENVCOLOR    (255`, 118`, 77`, 0`)
    G_SETCOMBINE     (G_CCMUX_TEXEL0, G_CCMUX_TEXEL1, G_CCMUX_TEXEL0, G_CCMUX_1, ...
                      G_ACMUX_1, G_ACMUX_TEXEL0, G_ACMUX_TEXEL1, G_ACMUX_1, ...
                      G_CCMUX_0, G_CCMUX_PRIMITIVE, G_CCMUX_COMBINED, G_CCMUX_ENVIRONMENT, ...
                      G_ACMUX_COMBINED, G_ACMUX_TEXEL1, G_ACMUX_TEXEL1, G_ACMUX_TEXEL1)
    G_SetOtherMode_L (G_MDSFT_RENDERMODE, ...
                      Z_CMP, IM_RD, CVG_DST_SAVE, FORCE_BL, ZMODE_XLU, ...
                      G_BL_CLR_IN, G_BL_0, G_BL_CLR_IN, G_BL_1, ...
                      G_BL_CLR_IN, G_BL_A_IN, G_BL_CLR_MEM, G_BL_1MA)
    G_GEOMETRYMODE   (Clear, G_LIGHTING)
    G_GEOMETRYMODE   (Set, G_SHADE, G_CULL_BACK, G_SHADING_SMOOTH)
    G_ENDDL
}

#new:Script $Script_802409E0
{
    Set   *Var[0]  *LastPartner
    Call  $Function_8024030C ( )
    Call  PlaySound ( 000000DC )
    Call  GotoMapSpecial    ( $ASCII_80244C80 00000005 0000000C ) % mac_04
    Wait  100`
    Loop
        Call  MakeLerp  ( FFFFFFF8 00000008 0000001E .Easing:Linear )
        Loop
            Call  UpdateLerp ( )
            Call  RotateGroup   ( ~Model:g13 *Var[0] 00000000 00000000 00000001 )
            Wait  1`
            If  *Var[1]  ==  00000000
                BreakLoop
            EndIf
        EndLoop
        Call  MakeLerp  ( 00000008 FFFFFFF8 0000001E .Easing:Linear )
        Loop
            Call  UpdateLerp ( )
            Call  RotateGroup   ( ~Model:g13 *Var[0] 00000000 00000000 00000001 )
            Wait  1`
            If  *Var[1]  ==  00000000
                BreakLoop
            EndIf
        EndLoop
    EndLoop
    Return
    End
}

#new:Script $Script_ExitSingleDoor_80240B64
{
    SetGroup  0000001B
    Call  DisablePlayerInput    ( .True )
    Set   *Var[0]  ~Entry:Entry0
    Set   *Var[1]  ~Collider:ttw
    Set   *Var[2]  ~Model:o9
    Set   *Var[3]  .DoorSwing:In % 1
    Exec  ExitSingleDoor
    Wait  17`
    If  *AreaByte[1]  ==  00000000
        Call  GotoMap   ( $ASCII_80244C90 00000006 ) % kkj_11
    Else
        Call  GotoMap   ( $ASCII_80244C88 00000000 ) % kkj_19
    EndIf
    Wait  100`
    Return
    End
}

#new:Script $Script_EnterSingleDoor_80240C3C
{
    Call  DisablePlayerInput    ( .True )
    If  *AreaFlag[011]  !=  .False
        Call  SetPlayerPos  ( FFFFFF1D 00000000 FFFFFFDD )
        Call  SetNpcPos     ( .Npc:Partner FFFFFF1D 00000000 FFFFFFDD )
        Wait  30`
        Call  PlaySoundAtCollider   ( ~Collider:ttw .Sound:BasicDoorOpen 00000000 )
        Call  MakeLerp      ( 00000000 00000050 0000000A .Easing:Linear )
        Loop
            Call  UpdateLerp ( )
            Call  RotateModel   ( ~Model:o9 *Var[0] 00000000 FFFFFFFF 00000000 )
            Wait  1`
            If  *Var[1]  ==  00000000
                BreakLoop
            EndIf
        EndLoop
        Call  SetPlayerPos  ( FFFFFF45 00000000 FFFFFFDD )
        Call  SetNpcPos     ( .Npc:Partner FFFFFF45 00000000 FFFFFFDD )
    EndIf
    Set   *Var[0]  00000000
    Set   *Var[2]  ~Model:o9
    Set   *Var[3]  .DoorSwing:In % 1
    ExecWait  EnterSingleDoor
    Call  DisablePlayerInput    ( .False )
    Bind  $Script_ExitSingleDoor_80240B64 .Trigger:WallPressA ~Collider:ttw 00000001 00000000
    Return
    End
}

#new:Script_Main $Script_Main
{
    Set   *WorldMapLocation  .Location:PeachsCastle
    Call  SetSpriteShading  ( FFFFFFFF )
    Call  SetCamPerspective ( .Cam:Default 00000003 00000019 00000010 00001000 )
    Call  SetCamBGColor     ( .Cam:Default 00000000 00000000 00000000 )
    Call  SetCamEnabled     ( .Cam:Default .True )
    If  *StoryProgress  ==  00000006
        Call  MakeNpcs  ( 00000000 $NpcGroupList_80241EF0 )
    EndIf
    Exec  $Script_802409E0[50]
    Call  SetTexPanner  ( ~Model:o56 00000000 )
    Thread
        Set   *Var[0]  00000000
        Set   *Var[1]  00000000
        Set   *Var[2]  00000000
        Set   *Var[3]  00000028
        Set   *Var[4]  00000384
        Set   *Var[5]  00000001
        Set   *Var[6]  00000001
        Set   *Var[7]  00000001
        Set   *Var[8]  00000001
        Set   *Var[9]  00000000
        Set   *Var[A]  00000000
        Set   *Var[B]  00000000
        Set   *Var[C]  00000000
        Exec  $Script_UpdateTexturePan_802408C0
    EndThread
    Call  802C90FC      ( 00000017 00000000 FFFFFFFF )
    Call  802C9428      ( 00000000 $DisplayList_80240960 00000000 )
    Exec  $Script_80240870
    Call  UseDoorSounds ( .DoorSounds:Basic )
    Exec  $Script_EnterSingleDoor_80240C3C
    Wait  1`
    Return
    End
}

PADDING: 8024100C to 80241010 (0000100C to 00001010)
00000000

#new:NpcSettings $NpcSettings_80241010
{
    00000000 0044003C 00000000 00000000 00000000 00000000 00000000 00000000
    00000000 00000000 00630000
}

#new:NpcSettings $NpcSettings_8024103C
{
    00000000 00180018 00000000 00000000 00000000 00000000 00000000 00000000
    00000000 00000000 00630000
}

#new:NpcSettings $NpcSettings_80241068
{
    00000000 0028001E 00000000 00000000 00000000 80077F70 00000000 8007809C
    00000000 00000000 001A0000
}

#new:NpcSettings $NpcSettings_80241094
{
    00000000 00280018 00000000 00000000 00000000 00000000 00000000 00000000
    00000000 00000000 00190000
}

#new:Script $Script_Idle_802410C0
{
    Call  802D2508 ( )
    Exec  $Script_80244C08
    Return
    End
}

#new:Script $Script_Interact_802410E8
{
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000000 001400A1 ) % Oh... I can't wait...
    Return
    End
}

#new:Script $Script_Interact_80241118
{
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000000 001400A6 ) % I'll never eat such a nasty creation again, I tell ...
    Return
    End
}

#new:Script $Script_Init_80241148
{
    Call  EnableGroup   ( ~Model:g12 .False )
    Call  ModifyColliderFlags   ( 00000000 ~Collider:g15 7FFFFE00 )
    Call  SetNpcPos     ( .Npc:Self 00000078 00000000 FFFFFFEC )
    Call  SetNpcYaw     ( .Npc:Self 0000010E )
    If  *AreaFlag[011]  ==  .False
        Call  BindNpcInteract   ( .Npc:Self $Script_Interact_802410E8 )
    Else
        Call  BindNpcInteract   ( .Npc:Self $Script_Interact_80241118 )
    EndIf
    Call  BindNpcIdle       ( .Npc:Self $Script_Idle_802410C0 )
    Call  SetNpcAnimation   ( 00000004 00C10009 )
    Call  SetNpcFlagBits    ( 00000004 00000002 .True )
    Call  EnableNpcShadow   ( 00000004 .False )
    Call  SetNpcPos ( 00000004 0000003C 00000028 FFFFFFF1 )
    Call  SetNpcYaw ( 00000004 0000010E )
    Call  SetNpcAnimation   ( 00000005 00C1000A )
    Call  SetNpcFlagBits    ( 00000005 00000002 .True )
    Call  EnableNpcShadow   ( 00000005 .False )
    Call  SetNpcPos ( 00000005 0000007D 00000028 FFFFFFF1 )
    Call  SetNpcYaw ( 00000005 0000010E )
    Return
    End
}

#new:ExtraAnimationList $ExtraAnimationList_802412F0
{
    00C10001 00C10002 00C10003 00C10004 00C10005 00C10006 00C10007 00C10008
    00C1000B 00C1000C 00C10009 00C1000A FFFFFFFF
}

#new:ExtraAnimationList $ExtraAnimationList_80241324
{
    00600001 00600002 00600004 00600005 FFFFFFFF
}

#new:ExtraAnimationList $ExtraAnimationList_80241338
{
    00580001 00580006 00580008 00580012 00580014 FFFFFFFF
}

#new:NpcGroup $NpcGroup_80241350
{
    00000000 $NpcSettings_80241068 ~Vec3f:NPC_80241350 % 0 -500 0
    00000D0D 00000000 00000000 00000000 0000010E
    ~NoDrops
    ~Movement:NPC_80241350
    ~AnimationTable:NPC_80241350 % .Sprite:WorldKammy
    00000000 00000000 $ExtraAnimationList_80241324 00000000 % no tattle string
    %
    % $NpcGroup_80241350[1F0]
    00000001 $NpcSettings_80241094 ~Vec3f:NPC_80241540 % 0 -500 0
    00000F0D 00000000 00000000 00000000 00000000
    ~NoDrops
    ~Movement:NPC_80241540
    ~AnimationTable:NPC_80241540 % .Sprite:WorldKoopatrol
    00000000 00000000 $ExtraAnimationList_80241338 00000000 % no tattle string
    %
    % $NpcGroup_80241350[3E0]
    00000002 $NpcSettings_80241094 ~Vec3f:NPC_80241730 % 0 -500 0
    00000F0D 00000000 00000000 00000000 00000000
    ~NoDrops
    ~Movement:NPC_80241730
    ~AnimationTable:NPC_80241730 % .Sprite:WorldKoopatrol
    00000000 00000000 $ExtraAnimationList_80241338 00000000 % no tattle string
    %
    % $NpcGroup_80241350[5D0]
    00000003 $NpcSettings_80241010 ~Vec3f:NPC_80241920 % -250 10 85
    00000D0D $Script_Init_80241148 00000000 00000000 0000005A
    ~NoDrops
    ~Movement:NPC_80241920
    ~AnimationTable:NPC_80241920 % .Sprite:GourmetGuy
    00000000 00000000 $ExtraAnimationList_802412F0 00000000 % no tattle string
    %
    % $NpcGroup_80241350[7C0]
    00000004 $NpcSettings_8024103C ~Vec3f:NPC_80241B10 % -250 10 85
    00000F0D 00000000 00000000 00000000 0000005A
    ~NoDrops
    ~Movement:NPC_80241B10
    ~AnimationTable:NPC_80241B10 % .Sprite:GourmetGuy
    00000000 00000000 $ExtraAnimationList_802412F0 00000000 % no tattle string
    %
    % $NpcGroup_80241350[9B0]
    00000005 $NpcSettings_8024103C ~Vec3f:NPC_80241D00 % -250 10 85
    00000F0D 00000000 00000000 00000000 0000005A
    ~NoDrops
    ~Movement:NPC_80241D00
    ~AnimationTable:NPC_80241D00 % .Sprite:GourmetGuy
    00000000 00000000 $ExtraAnimationList_802412F0 00000000 % no tattle string
}

#new:NpcGroupList $NpcGroupList_80241EF0
{
    00000006 $NpcGroup_80241350 00000000
    00000000 00000000 00000000
}

PADDING: 80241F08 to 80241F10 (00001F08 to 00001F10)
00000000 00000000

% Origin: HEURISTIC
#new:Unknown $???_80241F10
{
    00000000
}

% Origin: HEURISTIC
#new:Unknown $???_80241F14
{
    00000000
}

% Origin: HEURISTIC
#new:Script $Script_80241F18
{
    Set   *Var[9]  *Var[1]
    Call  802D6420 ( )
    Set   *Var[A]  *Var[0]
    Switch  *Var[0]
        Case  ==  00000000
        Case  ==  FFFFFFFF
        Default
            Call  RemoveKeyItemAt       ( *Var[1] )
            Call  GetPlayerPos  ( *Var[3] *Var[4] *Var[5] )
            Call  $Function_8024039C    ( *Var[3] *Var[4] *Var[5] )
            ConstOR  *Var[0] 00050000
            Call  MakeItemEntity        ( *Var[0] *Var[3] *Var[4] *Var[5] .ItemSpawnMode:Decoration 00000000 )
            Call  SetPlayerAnimation    ( 00060005 )
            Wait  30`
            Call  SetPlayerAnimation    ( 00010002 )
            Call  RemoveItemEntity      ( *Var[0] )
    EndSwitch
    Call  $Function_802405C0    ( *Var[A] )
    Call  802D6954 ( )
    Unbind
    Return
    End
}

% Origin: HEURISTIC
#new:Script $Script_8024205C
{
    Call  $Function_802405F8    ( *Var[0] )
    BindLock  $Script_80241F18 00000010 00000000 $End[0] 00000000 00000001
    Call  $Function_8024056C    ( *Var[0] )
    Return
    End
}

% Origin: HEURISTIC
#new:Script $Script_802420AC
{
    Set   *Var[9]  *Var[1]
    Call  802D663C ( )
    Set   *Var[A]  *Var[0]
    Switch  *Var[0]
        Case  ==  00000000
        Case  ==  FFFFFFFF
        Default
            Call  RemoveItemAt  ( *Var[1] )
            Call  GetPlayerPos  ( *Var[3] *Var[4] *Var[5] )
            Call  $Function_8024039C    ( *Var[3] *Var[4] *Var[5] )
            Call  MakeItemEntity        ( *Var[0] *Var[3] *Var[4] *Var[5] .ItemSpawnMode:Decoration 00000000 )
            Call  SetPlayerAnimation    ( 00060005 )
            Wait  30`
            Call  SetPlayerAnimation    ( 00010002 )
            Call  RemoveItemEntity      ( *Var[0] )
    EndSwitch
    Call  $Function_802405C0    ( *Var[A] )
    Call  802D6954 ( )
    Unbind
    Return
    End
}

% Origin: HEURISTIC
#new:Script $Script_802421E0
{
    Call  $Function_80240694    ( *Var[0] )
    BindLock  $Script_802420AC 00000010 00000000 $End[1C8] 00000000 00000001
    Call  $Function_8024056C    ( *Var[0] )
    Return
    End
}

#new:VectorList $VectorList_80242230
{
    % ~Path3f:Path_80242230
    -23.000000 30.000000 36.000000
    16.000000 62.000000 -10.000000
    64.000000 55.000000 5.000000
    112.000000 46.000000 20.000000
    160.000000 60.000000 -25.000000
}

#new:Script $Script_8024226C
{
    Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
    Add   *Var[0]  00000010
    Call  UseSettingsFrom   ( .Cam:Default *Var[0] *Var[1] *Var[2] )
    Call  SetPanTarget  ( .Cam:Default *Var[0] *Var[1] *Var[2] )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[1.0] )
    Call  SetNpcVar     ( 00000001 00000000 00000001 )
    Thread
        Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
        Sub   *Var[0]  0000001A
        Add   *Var[2]  00000002
        Call  SetNpcAnimation   ( 00000001 00580006 )
        Call  SetNpcSpeed   ( 00000001 *Fixed[5.0] )
        Wait  10`
        Call  NpcMoveTo     ( 00000001 FFFFFF7E FFFFFFE2 00000000 )
        Call  NpcMoveTo     ( 00000001 FFFFFF7E 0000001E 00000000 )
        Call  NpcMoveTo     ( 00000001 *Var[0] *Var[2] 00000000 )
        Call  SetNpcAnimation   ( 00000001 00580001 )
        Call  NpcFacePlayer ( 00000001 00000005 )
        Call  SetNpcVar     ( 00000001 00000000 00000000 )
    EndThread
    Thread
        Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
        Add   *Var[0]  0000001A
        Sub   *Var[2]  00000002
        Call  SetNpcAnimation   ( 00000002 00580006 )
        Call  SetNpcSpeed   ( 00000002 *Fixed[5.0] )
        Call  NpcMoveTo     ( 00000002 FFFFFF7E FFFFFFE2 00000000 )
        Call  NpcMoveTo     ( 00000002 FFFFFF7E 0000001E 00000000 )
        Call  NpcMoveTo     ( 00000002 FFFFFF9C 0000001E 00000000 )
        Call  NpcMoveTo     ( 00000002 *Var[0] *Var[2] 00000000 )
        Call  SetNpcAnimation   ( 00000002 00580001 )
        Call  NpcFacePlayer ( 00000002 00000005 )
    EndThread
    Call  InterpPlayerYaw   ( 0000010E 00000000 )
    Loop
        Wait  1`
        Call  GetNpcVar ( 00000001 00000000 *Var[0] )
        If  *Var[0]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Wait  10`
    Return
    End
}

#new:Script $Script_80242598
{
    Thread
        Call  GetNpcPos ( 00000001 *Var[0] *Var[1] *Var[2] )
        Add   *Var[0]  00000005
        Call  NpcMoveTo ( 00000001 *Var[0] *Var[2] 00000005 )
        Call  SetNpcAnimation   ( 00000001 00580012 )
        Add   *Var[0]  00000005
        Call  NpcMoveTo ( 00000001 *Var[0] *Var[2] 00000005 )
    EndThread
    Thread
        Call  GetNpcPos ( 00000002 *Var[0] *Var[1] *Var[2] )
        Sub   *Var[0]  00000005
        Call  NpcMoveTo ( 00000002 *Var[0] *Var[2] 00000005 )
        Call  SetNpcAnimation   ( 00000002 00580012 )
        Sub   *Var[0]  00000005
        Call  NpcMoveTo ( 00000002 *Var[0] *Var[2] 00000005 )
    EndThread
    Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
    Call  SetPlayerAnimation    ( 000C0005 )
    Wait  1`
    Loop  00000004
        Add   *Var[1]  00000002
        Call  SetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
        Wait  1`
    EndLoop
    Call  SetPlayerAnimation    ( 000C0018 )
    Add   *Var[0]  0000000A
    Loop  00000005
        Add   *Var[1]  00000004
        Call  SetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
        Wait  1`
    EndLoop
    Return
    End
}

#new:Script $Script_802427BC
{
    Call  InterpNpcYaw  ( 00000001 0000010E 00000003 )
    Wait  10`
    Thread
        Loop
            Call  GetNpcPos     ( 00000001 *Var[0] *Var[1] *Var[2] )
            Add   *Var[0]  00000016
            Sub   *Var[2]  00000002
            Call  SetPlayerPos  ( *Var[0] 0000001E *Var[2] )
            Wait  1`
        EndLoop
    EndThread
    Call  SetNpcVar ( 00000001 00000000 00000001 )
    Thread
        Call  SetNpcAnimation   ( 00000001 00580014 )
        Call  SetNpcSpeed       ( 00000001 *Fixed[5.0] )
        Call  NpcMoveTo ( 00000001 FFFFFF78 00000020 00000000 )
        Call  NpcMoveTo ( 00000001 FFFFFF78 FFFFFFE4 00000000 )
        Call  NpcMoveTo ( 00000001 FFFFFEF6 FFFFFFE4 00000000 )
        Call  SetNpcVar ( 00000001 00000000 00000000 )
    EndThread
    Thread
        Call  SetNpcAnimation   ( 00000002 00580014 )
        Call  SetNpcSpeed   ( 00000002 *Fixed[5.0] )
        Call  NpcMoveTo     ( 00000002 FFFFFF98 0000001C 00000000 )
        Call  NpcMoveTo     ( 00000002 FFFFFF98 FFFFFFE0 00000000 )
        Call  NpcMoveTo     ( 00000002 FFFFFF16 FFFFFFE0 00000000 )
    EndThread
    Call  SetCamSpeed   ( .Cam:Default *Fixed[90.0] )
    Loop
        Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
        Call  SetPanTarget  ( .Cam:Default *Var[0] 00000000 *Var[2] )
        Call  GetNpcVar     ( 00000001 00000000 *Var[0] )
        Wait  1`
        If  *Var[0]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Return
    End
}

#new:Script $Script_80242A5C
{
    Call  PlaySoundAt   ( 000001CB 00000000 000000BE 0000004E FFFFFFEC )
    Call  MakeLerp      ( 00000000 00000050 0000000E .Easing:QuadraticOut )
    Loop
        Call  UpdateLerp ( )
        Call  RotateGroup   ( ~Model:g15 *Var[0] 00000000 FFFFFFFF 00000000 )
        Call  RotateGroup   ( ~Model:g16 *Var[0] 00000000 00000001 00000000 )
        Wait  1`
        If  *Var[1]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Wait  20`
    Call  MakeLerp  ( 00000050 00000000 0000000E .Easing:QuadraticOut )
    Loop
        Call  UpdateLerp ( )
        Call  RotateGroup   ( ~Model:g15 *Var[0] 00000000 FFFFFFFF 00000000 )
        Call  RotateGroup   ( ~Model:g16 *Var[0] 00000000 00000001 00000000 )
        Wait  1`
        If  *Var[1]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Call  PlaySoundAt   ( 000001CC 00000000 000000BE 0000004E FFFFFFEC )
    Return
    End
}

#new:Script $Script_80242C08
{
    Call  SetNpcFlagBits    ( 00000005 00000002 .False )
    Call  GetNpcPos ( 00000005 *Var[0] *Var[1] *Var[2] )
    Call  SetNpcJumpscale   ( 00000005 *Fixed[0.05] )
    Call  NpcJump0  ( 00000005 *Var[0] FFFFFFF8 *Var[2] 00000008 )
    Call  802CDE68  ( 00000005 0000000F )
    Set   *Var[3]  00000000
    Loop  00000005
        Add   *Var[3]  00000032
        Call  SetNpcRotation    ( 00000005 00000000 00000000 *Var[3] )
        Wait  1`
    EndLoop
    Add   *Var[2]  00000014
    Call  SetNpcJumpscale   ( 00000005 *Fixed[0.2] )
    Call  NpcJump0  ( 00000005 *Var[0] FFFFFFEC *Var[2] 00000008 )
    Wait  10`
    Call  RemoveNpc ( 00000005 )
    Return
    End
}

#new:Script $Script_80242D50
{
    Call  SetNpcFlagBits    ( 00000004 00000002 .False )
    Call  GetNpcPos ( 00000004 *Var[0] *Var[1] *Var[2] )
    Call  SetNpcRotation    ( 00000004 00000000 00000000 FFFFFFE7 )
    Call  SetNpcJumpscale   ( 00000004 *Fixed[0.05] )
    Call  NpcJump0  ( 00000004 *Var[0] FFFFFFF8 *Var[2] 00000008 )
    Call  802CDE68  ( 00000004 0000000F )
    Set   *Var[3]  00000000
    Loop  00000005
        Sub   *Var[3]  00000032
        Call  SetNpcRotation    ( 00000004 00000000 00000000 *Var[3] )
        Wait  1`
    EndLoop
    Add   *Var[2]  00000014
    Call  SetNpcJumpscale   ( 00000004 *Fixed[0.2] )
    Call  NpcJump0  ( 00000004 *Var[0] FFFFFFEC *Var[2] FFFFFF9C )
    Wait  10`
    Call  RemoveNpc ( 00000004 )
    Return
    End
}

#new:Script $Script_80242EB4
{
    Thread
        Call  ShowMessageAtScreenPos    ( 001400AB 000000A0 00000028 ) % Oh...       Ohhh, Ohhhhhhh!!!!! Deliciooooooous!!! ...
    EndThread
    Exec  $Script_80242C08
    Exec  $Script_80242D50
    Call  SetNpcAnimation   ( 00000003 00C10007 )
    Wait  1`
    Call  UseSettingsFrom   ( .Cam:Default 0000005A 00000041 0000000A )
    Call  SetPanTarget  ( .Cam:Default 0000005A 00000041 0000000A )
    Call  SetCamDistance    ( .Cam:Default 000000AA )
    Call  SetCamPitch   ( .Cam:Default 0000000C *Fixed[-2.5] )
    Call  SetCamPosB    ( .Cam:Default *Fixed[110.0] *Fixed[45.5] )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[20.0] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Call  PlaySoundAtNpc    ( 00000003 00000381 00000000 )
    Wait  33`
    Call  SetCamDistance    ( .Cam:Default *Fixed[65.0] )
    Call  SetCamPitch   ( .Cam:Default *Fixed[7.5] *Fixed[-1.3] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Call  PlaySoundAtNpc    ( 00000003 00000382 00000000 )
    Wait  33`
    Call  SetCamDistance    ( .Cam:Default *Fixed[1.0] )
    Call  SetCamPitch   ( .Cam:Default *Fixed[3.5] 00000000 )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Call  PlaySoundAtNpc    ( 00000003 00000383 00000000 )
    Wait  18`
    Call  SetMusicTrack ( 00000000 .Song:GourmetGuyFreakout 00000000 00000008 )
    Wait  30`
    Call  802D7CF8      ( 00000000 00000000 00000000 00000140 000000F0 00000080 0000000A )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[12.0] )
    Loop  00000007
        Call  SetCamDistance    ( .Cam:Default 00000041 )
        Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
        Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
        Call  SetCamDistance    ( .Cam:Default 00000001 )
        Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
        Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    EndLoop
    Call  $Function_80240774 ( )
    Call  $Function_80240774 ( )
    Call  $Function_80240774 ( )
    Call  802D7CF8      ( 00000000 00000000 00000000 00000140 000000F0 00000000 0000000A )
    Call  UseSettingsFrom   ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetPanTarget  ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[90.0] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Return
    End
}

#new:Script $Script_802432A4
{
    Call  PlaySoundAtNpc    ( 00000003 00000384 00000000 )
    Call  SetNpcAnimation   ( 00000003 00C1000B )
    Call  SetNpcJumpscale   ( 00000003 *Fixed[0.001953125] )
    Call  GetNpcPos ( 00000003 *Var[0] *Var[1] *Var[2] )
    Call  NpcJump0  ( 00000003 *Var[0] 000000C8 *Var[2] 0000000F )
    Call  SetNpcAnimation   ( 00000003 00C10003 )
    Call  SetNpcFlagBits    ( 00000003 00000100 .True )
    Call  SetNpcSpeed       ( 00000003 *Fixed[20.0] )
    Call  PlaySoundAtNpc    ( 00000003 00000384 00000000 )
    Call  SetNpcRotation    ( 00000003 00000000 00000000 FFFFFFD3 )
    Call  SetNpcYaw ( 00000003 0000005A )
    Call  MakeLerp  ( 00000000 00000064 0000001E .Easing:Linear )
    Loop
        Call  UpdateLerp ( )
        SetF  *Var[2]  *Fixed[3.3]
        SetF  *Var[3]  *Fixed[-2.3]
        MulF  *Var[2]  *Var[0]
        MulF  *Var[3]  *Var[0]
        AddF  *Var[2]  *Fixed[-100.0]
        AddF  *Var[3]  *Fixed[150.0]
        SetF  *Var[4]  *Fixed[100.0]
        Call  SetNpcPos ( 00000003 *Var[2] *Var[3] *Var[4] )
        Wait  1`
        If  *Var[1]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Wait  20`
    Call  SetNpcRotation    ( 00000003 00000000 00000000 00000000 )
    Call  PlaySoundAtNpc    ( 00000003 00000384 00000000 )
    Call  SetNpcFlagBits    ( 00000003 00000080 .True )
    Call  SetNpcYaw ( 00000003 0000010E )
    Call  SetNpcPos ( 00000003 000000FA 000000A0 00000032 )
    Call  NpcMoveTo ( 00000003 FFFFFF9C 00000032 00000000 )
    Call  SetNpcFlagBits    ( 00000003 00000080 .False )
    Wait  20`
    Call  PlaySoundAtNpc    ( 00000003 00000384 00000000 )
    Call  SetNpcYaw ( 00000003 0000005A )
    Call  SetNpcPos ( 00000003 FFFFFF9C 00000000 00000046 )
    Call  NpcMoveTo ( 00000003 0000008C 00000046 00000000 )
    Wait  20`
    Call  SetNpcVar ( 00000003 00000000 00000000 )
    Return
    End
}

#new:Script $Script_802435FC
{
    Call  PlaySoundAtNpc    ( 00000003 00002096 00000000 )
    Call  SetNpcAnimation   ( 00000003 00C10006 )
    Call  MakeItemEntity    ( *MapVar[0] ~Vec3d:Item80243628 .ItemSpawnMode:Decoration 00000000 )
    Call  MakeLerp  ( 00000000 00000064 00000004 .Easing:Linear )
    Loop
        Call  UpdateLerp ( )
        SetF  *Var[2]  *Fixed[0.2]
        SetF  *Var[3]  *Fixed[-0.3]
        SetF  *Var[4]  *Fixed[0.5]
        MulF  *Var[2]  *Var[0]
        MulF  *Var[3]  *Var[0]
        MulF  *Var[4]  *Var[0]
        AddF  *Var[2]  *Fixed[105.0]
        AddF  *Var[3]  *Fixed[30.0]
        AddF  *Var[4]  *Fixed[20.0]
        Call  SetItemPos    ( *Var[A] *Var[2] *Var[3] *Var[4] )
        Wait  1`
        If  *Var[1]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Call  MakeLerp  ( 00000000 00000064 00000004 .Easing:Linear )
    Loop
        Call  UpdateLerp ( )
        SetF  *Var[2]  *Fixed[0.2]
        SetF  *Var[3]  *Fixed[0.3]
        SetF  *Var[4]  *Fixed[0.5]
        MulF  *Var[2]  *Var[0]
        MulF  *Var[3]  *Var[0]
        MulF  *Var[4]  *Var[0]
        AddF  *Var[2]  *Fixed[125.0]
        AddF  *Var[3]  *Fixed[0.0]
        AddF  *Var[4]  *Fixed[70.0]
        Call  SetItemPos    ( *Var[A] *Var[2] *Var[3] *Var[4] )
        Wait  1`
        If  *Var[1]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Call  RemoveItemEntity  ( *Var[A] )
    Call  SetNpcAnimation   ( 00000003 00C10001 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A5 ) % Nooooooo! Haaaaackpth! Aw, disgusting! This is awf ...
    Call  UseSettingsFrom   ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetPanTarget  ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[90.0] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Switch  *AreaByte[1]
        Case  ==  00000005
            Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400AA ) % Mmmmm... No no no. All wrong. Look at this decorat ...
        Case  ==  00000004
            Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A9 ) % Cough...gag... Pbbbbth! This wasn't baked for the  ...
        Case  ==  00000002
            Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A8 ) % Ack! Bleeaaagh...! Awful! Just awful! You didn't m ...
        CaseOR  ==  00000001
        CaseOR  ==  00000003
            Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A7 ) % What ingredients did you use in that monstrosity?  ...
        EndCaseGroup
    EndSwitch
    Call  SetNpcAnimation   ( 00000003 00C10002 )
    Call  SetNpcJumpscale   ( 00000003 00000000 )
    Call  NpcJump1  ( 00000003 00000078 00000000 FFFFFFEC 0000000F )
    Call  SetNpcAnimation   ( 00000003 00C10001 )
    Call  ResetCam  ( .Cam:Default *Fixed[1.0] )
    Return
    End
}

#new:Script $Script_80243A88
{
    Call  SetPlayerAnimation    ( 000C0005 )
    Wait  10`
    Call  InterpPlayerYaw       ( 0000005A 00000005 )
    Call  SetPlayerAnimation    ( 000A0001 )
    Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
    Add   *Var[1]  00000023
    Loop
        Call  802D7E08  ( 00000000 00000001 FFFFFFD3 00000002 *Var[0] *Var[1] *Var[2] 0000000D 00000014 )
        Wait  20`
    EndLoop
    Return
    End
}

#new:Script $Script_80243B50
{
    Call  DisablePlayerInput    ( .True )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000000 0014009A ) % Urp... Huh...? Who are you?
    Wait  10`
    Call  SetPlayerSpeed        ( *Fixed[4.0] )
    Call  PlayerMoveTo  ( FFFFFF83 00000028 00000000 )
    Call  PlayerMoveTo  ( 00000032 00000028 00000000 )
    Wait  10`
    Call  SpeakToPlayer ( .Npc:Player 000D0004 000A0001 00000005 0014009B ) % Why, I'm Princess Peach. And who might you be?
    Call  AdjustCam     ( .Cam:Default *Fixed[4.0] 00000023 0000012C *Fixed[17.0] *Fixed[-11.0] )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 0014009C ) % Oh! You're Princess Peach. Everyone calls me the G ...
    Call  SetPlayerAnimation    ( 000C0000 )
    Wait  10`
    Call  SetPlayerAnimation    ( 000C0026 )
    Call  SpeakToPlayer ( .Npc:Player 000C0001 000C0026 00000005 0014009D ) % I'd love to cook for you, Mr. Gourmet Guy, but...  ...
    Call  SetPlayerAnimation    ( 000C0002 )
    Wait  10`
    Call  SetPlayerAnimation    ( 000A0001 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 0014009E ) % Aw, that's no problem. There's a kitchen one floor ...
    Call  SetNpcAnimation       ( 00000003 00C10002 )
    Call  NpcMoveTo     ( 00000003 00000064 FFFFFFEC 0000000A )
    Call  SetNpcAnimation       ( 00000003 00C10001 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 0014009F ) % Here, you'll need this. This key will open the doo ...
    Call  SetNpcAnimation       ( 00000003 00C1000C )
    Wait  30`
    Set   *Var[0]  0000006A
    Call  ShowGotItem   ( *Var[0] .True 00000000 )
    Call  AddKeyItem    ( *Var[0] )
    Set   *Flag_KKJ_14  .True
    Call  SetNpcAnimation       ( 00000003 00C10002 )
    Call  SetNpcJumpscale       ( 00000003 00000000 )
    Call  NpcJump1      ( 00000003 00000078 00000000 FFFFFFEC 0000000A )
    Call  SetNpcAnimation       ( 00000003 00C10001 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A0 ) % So! I'll just sit here and wait for my yummy meal, ...
    Call  ResetCam      ( .Cam:Default *Fixed[4.0] )
    Call  DisablePlayerInput    ( .False )
    Return
    End
}

#new:Script $Script_80243E50
{
    Call  DisablePlayerInput    ( .True )
    If  *AreaFlag[010]  ==  .False
        Set   *MapVar[0]  00000164
        Set   *Var[0]  000D0002
        Set   *Var[1]  000A0027
    Else
        If  *AreaFlag[00F]  ==  .False
            Set   *MapVar[0]  00000165
            Set   *Var[0]  000D0003
            Set   *Var[1]  000A0029
        Else
            Set   *MapVar[0]  0000015E
            Set   *Var[0]  000D0000
            Set   *Var[1]  000A0017
        EndIf
    EndIf
    Call  SpeakToPlayer ( .Npc:Player *Var[0] *Var[1] 00000005 001400A2 ) % Here you go!
    Call  UseSettingsFrom   ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetPanTarget  ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[1.0] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A3 ) % Oh! I've been waiting so long! I've wasted away to ...
    Call  ResetCam      ( .Cam:Default *Fixed[90.0] )
    Call  SetPlayerSpeed    ( *Fixed[2.0] )
    Call  PlayerMoveTo  ( FFFFFF83 00000028 00000000 )
    Call  PlayerMoveTo  ( 0000000F 00000028 00000000 )
    Wait  10`
    Call  MakeItemEntity    ( *MapVar[0] ~Vec3d:Item80244048 .ItemSpawnMode:Decoration 00000000 )
    Call  SetNpcVar     ( 00000003 00000007 *Var[0] )
    Set   *AreaFlag[011]  .False
    Call  $Function_80240730    ( 00000000 )
    Thread
        Call  DisablePartnerAI  ( 00000000 )
        Call  NpcFlyTo  ( .Npc:Partner FFFFFFE9 0000001E 00000024 00000005 00000000 .Easing:Linear )
        Call  InterpNpcYaw      ( .Npc:Partner 0000005A 00000005 )
    EndThread
    Call  PlayerMoveTo  ( 00000011 00000024 00000005 )
    Call  InterpPlayerYaw   ( 0000005A 00000005 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000005 001400A4 ) % Thank you!
    Call  SetNpcAnimation   ( 00000003 00C10002 )
    Call  NpcMoveTo     ( 00000003 0000005A FFFFFFEC 00000014 )
    Call  SetNpcAnimation   ( 00000003 00C10001 )
    Call  UseSettingsFrom   ( .Cam:Default 0000005A 00000000 0000000A )
    Call  SetPanTarget  ( .Cam:Default 0000005A 00000000 0000000A )
    Call  SetCamDistance    ( .Cam:Default 000000FA )
    Call  SetCamPitch   ( .Cam:Default 00000011 FFFFFFF2 )
    Call  SetCamPosB    ( .Cam:Default *Fixed[110.0] *Fixed[45.5] )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[3.0] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Call  GetNpcVar     ( 00000003 00000007 *Var[A] )
    Call  RemoveItemEntity  ( *Var[A] )
    Call  SetNpcAnimation   ( 00000003 00C10005 )
    Loop  00000006
        Wait  10`
        Call  PlaySoundAtNpc    ( 00000003 00002095 00000000 )
    EndLoop
    If  *AreaByte[1]  !=  00000006
        ExecWait  $Script_802435FC
        Call  EnablePartnerAI ( )
        Call  DisablePlayerPhysics  ( .False )
        Call  DisablePlayerInput    ( .False )
        Return
    EndIf
    Call  SetEnemyFlagBits  ( 00000003 08000000 00000001 )
    ExecWait  $Script_80242EB4
    Call  SetNpcVar ( 00000003 00000000 00000001 )
    Exec  $Script_802432A4
    Loop
        Call  PlayerFaceNpc ( 00000003 00000000 )
        Call  NpcFaceNpc    ( .Npc:Partner 00000003 00000000 )
        Wait  1`
        Call  GetNpcVar     ( 00000003 00000000 *Var[0] )
        If  *Var[0]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Exec  $Script_80240870
    Call  SetNpcAnimation   ( 00000003 00C10001 )
    Call  InterpNpcYaw  ( 00000003 0000010E 00000005 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000000 001400AC ) % Phew...  That was really good. I haven't felt this ...
    Call  SetNpcAnimation   ( 00000003 00C10002 )
    Call  SetNpcSpeed   ( 00000003 *Fixed[2.0] )
    Call  NpcMoveTo     ( 00000003 00000050 00000046 00000000 )
    Call  SetNpcAnimation   ( 00000003 00C10001 )
    Call  SpeakToPlayer ( 00000003 00C10004 00C10001 00000000 001400AD ) % One of the Star Spirits is inside Mt. Lavalava on  ...
    Thread
        Loop  00000064
            Call  PlayerFaceNpc ( 00000003 00000000 )
            Call  NpcFaceNpc    ( .Npc:Partner 00000003 00000000 )
            Wait  1`
        EndLoop
    EndThread
    Call  SetNpcAnimation   ( 00000003 00C10002 )
    Call  NpcMoveTo ( 00000003 FFFFFF06 00000046 00000000 )
    Call  AdjustCam ( .Cam:Default *Fixed[2.0] FFFFFFEC 0000012C *Fixed[17.0] *Fixed[-10.0] )
    Call  InterpPlayerYaw   ( 0000010E 00000005 )
    Call  SetPlayerAnimation    ( 000C0000 )
    Wait  10`
    Call  SetPlayerAnimation    ( 000C0026 )
    Call  SpeakToPlayer     ( .Npc:Player 000C0001 000C0026 00000005 001400AE ) % Twink, did you hear that!? Mt. Lavalava! Lavalava  ...
    Call  SpeakToPlayer     ( .Npc:Partner 00200009 00200001 00000000 001400AF ) % Mario could really use this information, huh?
    Call  SpeakToPlayer     ( .Npc:Player 000C0001 000C0026 00000005 001400B0 ) % Yes, he could... Twink, I'm sorry that I keep aski ...
    Call  SetPlayerAnimation    ( 000C0002 )
    Wait  10`
    Call  SetPlayerAnimation    ( 000A0001 )
    Call  SpeakToPlayer     ( .Npc:Partner 00200009 00200001 00000000 001400B1 ) % Of course I will. I'll do it right now!
    Call  UseSettingsFrom   ( .Cam:Default 00000078 00000000 0000000A )
    Call  SetPanTarget      ( .Cam:Default 00000096 00000000 0000000A )
    Call  SetCamDistance    ( .Cam:Default 00000190 )
    Call  SetCamSpeed       ( .Cam:Default *Fixed[1.2] )
    Call  LoadPath  ( 0000003C $VectorList_80242230 00000005 .Easing:Linear )
    Loop
        Call  GetNextPathPos ( )
        Call  SetNpcPos ( .Npc:Partner *Var[1] *Var[2] *Var[3] )
        Wait  1`
        If  *Var[0]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Call  SetNpcFlagBits    ( .Npc:Partner 00000040 .True )
    Call  SpeakToPlayer ( .Npc:Partner 00200009 00200001 00000010 001400B2 ) % I'll be back soon, Princess Peach!
    Exec  $Script_80242A5C
    Wait  14`
    Call  NpcFlyTo      ( .Npc:Partner 000000FA 00000046 FFFFFFE7 0000001E 00000000 .Easing:Linear )
    Wait  30`
    Call  SetNpcPos     ( 00000001 FFFFFF06 00000000 FFFFFFE2 )
    Call  SetNpcPos     ( 00000002 FFFFFF06 00000000 FFFFFFE2 )
    Call  SetNpcPos     ( 00000000 FFFFFF06 00000000 FFFFFFE2 )
    Call  SpeakToPlayer ( 00000000 00600004 00600001 00000000 001400B3 ) % What's with all the shouting? Keep it quiet in her ...
    Call  SetMusicTrack ( 00000000 .Song:KammyKoopaTheme 00000000 00000008 )
    Call  UseSettingsFrom   ( .Cam:Default FFFFFF4C 00000000 FFFFFFE2 )
    Call  SetPanTarget  ( .Cam:Default FFFFFF4C 00000000 FFFFFFE2 )
    Call  SetCamDistance    ( .Cam:Default *Fixed[300.0] )
    Call  SetCamPosA    ( .Cam:Default *Fixed[-110.0] *Fixed[45.5] )
    Call  SetCamSpeed   ( .Cam:Default *Fixed[5.0] )
    Call  PanToTarget   ( .Cam:Default 00000000 00000001 )
    Call  WaitForCam    ( .Cam:Default *Fixed[1.0] )
    Call  PlaySoundAtCollider   ( ~Collider:ttw .Sound:BasicDoorOpen 00000000 )
    Call  MakeLerp      ( 00000000 FFFFFF88 0000000E .Easing:QuadraticOut )
    Loop
        Call  UpdateLerp ( )
        Call  RotateModel   ( ~Model:o9 *Var[0] 00000000 00000001 00000000 )
        Wait  1`
        If  *Var[1]  ==  00000000
            BreakLoop
        EndIf
    EndLoop
    Thread
        Wait  60`
        Call  GetPlayerPos  ( *Var[0] *Var[1] *Var[2] )
        Add   *Var[0]  FFFFFFE2
        Call  SetPanTarget  ( .Cam:Default *Var[0] *Var[1] *Var[2] )
        Call  SetCamDistance    ( .Cam:Default 00000190 )
        Call  SetCamSpeed   ( .Cam:Default *Fixed[1.0] )
    EndThread
    Call  SetNpcAnimation       ( 00000000 00600002 )
    Call  SetNpcSpeed   ( 00000000 *Fixed[2.0] )
    Call  NpcMoveTo     ( 00000000 FFFFFF7E FFFFFFE2 00000000 )
    Call  NpcMoveTo     ( 00000000 FFFFFF88 00000050 00000000 )
    Call  NpcMoveTo     ( 00000000 FFFFFFBA 00000050 00000000 )
    Call  SetNpcAnimation       ( 00000000 00600001 )
    Exec  $Script_80243A88 *Var[A]
    Call  SpeakToPlayer ( 00000000 00600004 00600001 00000000 001400B4 ) % So! It was you, Princess Peach! You've got to keep ...
    Call  EndSpeech     ( 00000000 00600005 00600005 00000005 )
    Call  SpeakToNpc    ( 00000000 00600005 00600001 00000000 00000001 001400B5 ) % Guards!! Get the princess!
    Kill  *Var[A]
    Call  DisablePlayerPhysics  ( .True )
    ExecWait  $Script_8024226C
    ExecWait  $Script_80242598
    Call  SpeakToPlayer ( .Npc:Player 000C0018 000C0018 00000005 001400B6 ) % Nooooo!!
    Thread
        Wait  30`
        Call  InterpNpcYaw  ( 00000000 0000010E 00000005 )
    EndThread
    ExecWait  $Script_802427BC
    Call  FadeOutMusic  ( 00000000 000003E8 )
    ExecWait  $Script_802409E0
    Call  EnablePartnerAI ( )
    Call  DisablePlayerPhysics  ( .False )
    Call  DisablePlayerInput    ( .False )
    Return
    End
}

#new:Script $Script_80244C08
{
    Call  SetCamLeadPlayer  ( .Cam:Default .False )
    If  *Flag_KKJ_14  ==  .False
        ExecWait  $Script_80243B50
    EndIf
    If  *AreaFlag[011]  ==  .True
        ExecWait  $Script_80243E50
    EndIf
    Return
    End
}

PADDING: 80244C74 to 80244C80 (00004C74 to 00004C80)
00000000 00000000 00000000

#new:ASCII $ASCII_80244C80
{
    "mac_04"
}

#new:ASCII $ASCII_80244C88
{
    "kkj_19"
}

#new:ASCII $ASCII_80244C90
{
    "kkj_11"
}

PADDING: 80244C98 to 80244CA0 (00004C98 to 00004CA0)
00000000 00000000

#new:ConstDouble $ConstDouble_80244CA0
{
    360.000000d
}

PADDING: 80244CA8 to 80244CB0 (00004CA8 to 00004CB0)
00000000 00000000

