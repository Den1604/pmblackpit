#import LoadBtGeometry.bpat
% This file covers Levels 81-89

% ====================================================
% Formations
% ====================================================

#import 22_Koopatrol.bpat
#import 22_HammerBros.bpat
#import 22_BonyBeetle.bpat
#import 22_DryBones.bpat
#import 25_Koopatrol.bpat

#new:FormationTable $FormationTable
{
00000000 00000003 $Formation_Pit8-1-1 $Stage_Pit3 00000000
00000000 00000003 $Formation_Pit8-1-2 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-1-3 $Stage_Pit3 00000000 
00000000 00000002 $Formation_Pit8-2-1 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-2-2 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-2-3 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-3-1 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-3-2 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-3-3 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-4-1 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-4-2 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-4-3 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-5-1 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-5-2 $Stage_Pit3 00000000 
00000000 00000003 $Formation_Pit8-5-3 $Stage_Pit3 00000000 
00000000 00000000 00000000 00000000 00000000
}

%====
% Levels 81-89
%====

% Level 81,86

#new:Formation $Formation_Pit8-1-1 % Floors<90-Floor81-Formation1
{
$22_Koopatrol 00000000 00000000 00000000 00000000 00000000 00000000
$22_Koopatrol 00000001 00000000 00000000 00000000 00000000 00000000
$22_Koopatrol 00000002 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-1-2 % Floors<90-Floor81-Formation2
{
$22_Koopatrol 	00000001 00000000 00000000 00000000 00000000 00000000
$22_HammerBros  00000002 00000000 00000000 00000000 00000000 00000000
$22_DryBones 	00000003 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-1-3 % Floors<90-Floor81-Formation3
{
$22_Koopatrol  00000000 00000000 00000000 00000000 00000000 00000000
$22_Koopatrol  00000001 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle 00000002 00000000 00000000 00000000 00000000 00000000
}

% Level 82,87

#new:Formation $Formation_Pit8-2-1 % Floors<90-Floor82-Formation1
{
$22_HammerBros  00000001 00000000 00000000 00000000 00000000 00000000
$22_HammerBros	00000002 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-2-2 % Floors<90-Floor82-Formation2
{
$22_HammerBros	00000001 00000000 00000000 00000000 00000000 00000000
$22_HammerBros	00000002 00000000 00000000 00000000 00000000 00000000
$22_Koopatrol   00000003 00000000 00000000 00000000 00000000 00000000
}


#new:Formation $Formation_Pit8-2-3 % Floors<90-Floor82-Formation3
{
$22_HammerBros	00000000 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle	00000001 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle	00000002 00000000 00000000 00000000 00000000 00000000
}

% Level 83,88

#new:Formation $Formation_Pit8-3-1 % Floors<90-Floor83-Formation1
{
$22_BonyBeetle 	00000001 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle  00000002 00000000 00000000 00000000 00000000 00000000
$22_HammerBros 	00000003 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-3-2 % Floors<90-Floor83-Formation2
{
$22_BonyBeetle 	00000001 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle  00000002 00000000 00000000 00000000 00000000 00000000
$22_DryBones 	00000003 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-3-3 % Floors<90-Floor83-Formation3
{
$22_BonyBeetle 	00000000 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle  00000001 00000000 00000000 00000000 00000000 00000000
$22_BonyBeetle 	00000002 00000000 00000000 00000000 00000000 00000000
}

% Level 84,89

#new:Formation $Formation_Pit8-4-1 % Floors<90-Floor84-Formation1
{
$22_DryBones 	00000001 00000000 00000000 00000000 00000000 00000000
$22_DryBones 	00000002 00000000 00000000 00000000 00000000 00000000
$22_HammerBros 	00000003 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-4-2 % Floors<90-Floor84-Formation2
{
$22_DryBones 	00000000 00000000 00000000 00000000 00000000 00000000
$22_HammerBros 	00000001 00000000 00000000 00000000 00000000 00000000
$22_HammerBros 	00000002 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-4-3 % Floors<90-Floor84-Formation3
{
$22_DryBones 00000000 00000000 00000000 00000000 00000000 00000000
$22_DryBones 00000001 00000000 00000000 00000000 00000000 00000000
$22_DryBones 00000002 00000000 00000000 00000000 00000000 00000000
}

% Level 85

#new:Formation $Formation_Pit8-5-1 % Floors<90-Floor85-Formation1
{
$25_Koopatrol	00000001 00000000 00000000 00000000 00000000 00000000
$25_Koopatrol	00000002 00000000 00000000 00000000 00000000 00000000
$25_Koopatrol	00000003 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-5-2 % Floors<90-Floor85-Formation2
{
$25_Koopatrol	00000000 00000000 00000000 00000000 00000000 00000000
$25_Koopatrol	00000001 00000000 00000000 00000000 00000000 00000000
$25_Koopatrol	00000002 00000000 00000000 00000000 00000000 00000000
}

#new:Formation $Formation_Pit8-5-3 % Floors<90-Floor85-Formation3
{
$25_Koopatrol	00000000 00000000 00000000 00000000 00000000 00000000
$25_Koopatrol	00000001 00000000 00000000 00000000 00000000 00000000
$25_Koopatrol	00000002 00000000 00000000 00000000 00000000 00000000
}


% ====================================================
% Stages
% ====================================================

#new:StageTable $StageTable 
{
"pt1_6" $Stage_Pit1
"pt51_56" $Stage_Pit2
"pt81_86" $Stage_Pit3
00000000 00000000 
}

#new:Stage $Stage_Pit1
{
"tik_tex"
"pit_bt01_shape"
"pit_bt01_hit"
$Script_BeforeBattle
$Script_AfterBattle
00000000 % Stage Background
00000000 
00000000 
00000000 
}

#new:Stage $Stage_Pit2
{
"tik_tex"
"pit_bt02_shape"
"pit_bt02_hit"
$Script_BeforeBattle
$Script_AfterBattle
00000000 % Stage Background
00000000 
00000000 
00000000 
}

#new:Stage $Stage_Pit3
{
"tik_tex"
"pit_bt03_shape"
"pit_bt03_hit"
$Script_BeforeBattle
$Script_AfterBattle
00000000 % Stage Background
00000000 
00000000 
00000000 
}

#new:Script $Script_BeforeBattle
{
	ExecWait	$Script_InitBMap % Loaded from LoadBtGeometry.bpat
	Call		SetSpriteShading	( FFFFFFFF )
	Call		SetCamBGColor		( 00000001 00000000 00000000 00000000 )
	Call    	SetBattleFlagBits 	( 00800000 .True ) % To not trigger a Game Over
	Return
	End
}

#new:Script $Script_AfterBattle
{
	Return
	End
}

	
	
	% Loaded from 22_BonyBeetle.bpat, was just copy pasted here, because Star Rod wasn't able to compile the script...
@$Script_Init_80218A70_22
{
     Call     GetActorVar 	( .Actor:Self 00000000 *Var[0] )
     Call     8027D75C ( FFFFFF81 *Var[1] )
     If  *Var[0]  ==  00000001 
     	If  *Var[1]  ==  00000001 
     		Call     SetActorVar 	( .Actor:Self 00000008 00000001 )
     		Call     SetIdleAnimations 	( .Actor:Self 00000001 $IdleAnimations_8021887C_22 )
     		Call     SetPartEventBits 	( .Actor:Self 00000001 00000010 .True )
     		Call     SetAnimation 	( .Actor:Self 00000001 00550005 )
     	Else
    		Call     SetActorVar 	( .Actor:Self 00000008 00000000 )
     		Call     SetIdleAnimations 	( .Actor:Self 00000001 $IdleAnimations_80218830_22 )
     		Call     SetPartEventBits 	( .Actor:Self 00000001 00000010 .False )
    		Call     SetAnimation 	( .Actor:Self 00000001 00550004 )
    	EndIf
    Else
    	Call     RandInt     	( 000003E8 *Var[0] )
    	If  *Var[0]  <  000001F4 
    		Call     SetActorVar 	( .Actor:Self 00000008 00000000 )
    		Call     SetIdleAnimations 	( .Actor:Self 00000001 $IdleAnimations_80218830_22 )
    		Call     SetPartEventBits 	( .Actor:Self 00000001 00000010 .False )
    		Call     SetAnimation 	( .Actor:Self 00000001 00550004 )
    	Else
    		Call     SetActorVar 	( .Actor:Self 00000008 00000001 )
    		Call     SetIdleAnimations 	( .Actor:Self 00000001 $IdleAnimations_8021887C_22 )
    		Call     SetPartEventBits 	( .Actor:Self 00000001 00000010 .True )
    		Call     SetAnimation 	( .Actor:Self 00000001 00550005 )
    	EndIf
    EndIf
  Call     8027D4C8 ( FFFFFF81 00000001 00000000 FFFFFFF8 )
  Call     SetTargetOffset 	( .Actor:Self 00000001 FFFFFFFD 00000015 )
  Call     SetActorFlagBits 	( .Actor:Self 00000800 .False )
  Call     BindIdle    	( .Actor:Self $Script_Idle_80218D6C_22 )
  Call     BindHandleEvent 	( .Actor:Self $Script_HandleEvent_80218D7C_22 )
  Call     BindTakeTurn 	( .Actor:Self $Script_TakeTurn_80219110_22 )
  Call     HPBarToHome 	( .Actor:Self )
  Call     SetActorVar 	( .Actor:Self 00000001 00000000 )
  Return
  End
}
